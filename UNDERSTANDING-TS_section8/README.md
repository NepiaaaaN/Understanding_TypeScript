# UNDERSTANDING-TS_section8

## 105. イントロダクション

- デコレータはメタプログラミングに非常に役に立つ機能
- デコレータは、クラスやクラスのメソッドが正しく使われることを保証したり、表向きには見えない変換処理を行ったりする

### このセクションで学ぶこと

1. デコレータ(Decorators)とは何か
2. デコレータの使い方
3. デコレータの使用例

## 106. 最初のクラスデコレータ

- `@`はデコレータを TypeScript が認識する特別な識別子
- `@`のあとに関数名を指定する
- デコレータはクラスが定義された時に実行される
  - インスタンス化のタイミングではない

## 107. デコレータファクトリ

- デコレータファクトリを使うことで、デコレータの内部で行うことをカスタマイズすることが出来る

## 108. 便利なデコレータ

- そもそもデコレータとは？ : [参考](https://zenn.dev/miruoon_892/articles/365675fa5343ed)
  - クラスの宣言などに結び付けられる特別な宣言の 1 つ。
  - `@expression` の形式で宣言する。既存のクラスやメソッドにデコレーションする（=追加機能を入れる）イメージ
- メタプログラミングとは？ : [参考](https://ja.wikipedia.org/wiki/%E3%83%A1%E3%82%BF%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0)
  - プログラミング技法の一種で、ロジックを直接コーディングするのではなく、あるパターンをもったロジックを生成する高位ロジックによってプログラミングを行う方法、またその高位ロジックを定義する方法のこと。
  - 主に対象言語に埋め込まれたマクロ言語によって行われる。
- デコレータの中の関数の引数に`_`を設定すると、この引数は受け取るけれども必要ないということを伝えることが出来る
  - しかし引数としては書いておく必要がある
  - この引数を認識しているけれども使いません。を示すもの。
- このテンプレートファクトリのロジックはサードパーティーライブラリとして公開して他のユーザーに共有することが出来る
  - これをライブラリの一部として誰かに公開することが出来る
  - ユーザは、このデコレータ関数をインポートして、クラスに追加することで使えるようになる
- angular というライブラリを使用する際と同じ概念。

## 109. 複数のデコレータの追加

- デコレータは下から上に向かって実行される
  - これはデコレータ関数が呼び出されたときの挙動
  - デコレータファクトリ自体の呼び出しは JavaScript の呼び出し順序に従う

## 110. プロパティデコレータの詳細

- デコレータを追加するにはクラスが必要
  - しかし必ずしも直接クラスに対して追加する必要はない
- private 変数にする際には、`private`修飾子をつけて、変数の頭に`_`を付ける
- クラスのプロパティに対して、デコレータを設定出来る
- プロパティに設定した場合、このプロパティを持っているコンストラクタ関数が、JavaScript で作られた時、プロパティデコレータが実行される

## 111. アクセサとパラメータのデコレータ

- アクセサに対してもデコレータを設定することが可能
- デコレータ関数が受け取る第一引数について
  - インスタンスのデコレータであればプロトタイプが渡される
  - スタティックのアクセサであればコンストラクタ関数が渡される
    - なので型は`any`となる
- 第二引数について
  - アクセサの名前が入ってくる
- 第三引数について
  - プロパティディスクリプタ
  -
